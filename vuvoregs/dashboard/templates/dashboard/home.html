{% extends 'dashboard/base.html' %}
{% block content %}
<h2 class="mb-4">Dashboard Overview</h2>

<div class="row row-cols-1 row-cols-md-3 g-4">
    <div class="col">
        <div class="card text-bg-primary">
            <div class="card-body">
                <h5 class="card-title">Total Registrations</h5>
                <p class="display-5">{{ total_regs }}</p>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="card text-bg-success">
            <div class="card-body">
                <h5 class="card-title">Today</h5>
                <p class="display-5">{{ today_regs }}</p>
            </div>
        </div>
    </div>
    <div class="col">
        <div class="card text-bg-warning">
            <div class="card-body">
                <h5 class="card-title">Last 7 Days</h5>
                <p class="display-5">{{ last_7_days_regs }}</p>
            </div>
        </div>
    </div>
</div>
<h4 class="mt-5">Upcoming Events</h4>

{% if upcoming_events %}
<div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4">
    {% for event in upcoming_events %}
    <div class="col">
        <div class="card h-100">
            <div class="card-body">
                <h5 class="card-title">{{ event.name }}</h5>
                <p class="card-text">
                    <strong>Date:</strong> {{ event.date }}<br>
                    <strong>Location:</strong> {{ event.location }}<br>
                    <strong>Registrations:</strong> {{ event.registrations.count }}
                </p>
                <a href="{% url 'dashboard:event_dashboard' event.id %}" class="btn btn-primary">
                    View Analytics
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<p class="text-muted">No upcoming events.</p>
{% endif %}
{% endblock %}
